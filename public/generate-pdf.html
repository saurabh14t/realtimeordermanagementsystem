<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Project PDF</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2d3748;
            margin-bottom: 1rem;
            text-align: center;
        }
        .description {
            color: #4a5568;
            margin-bottom: 2rem;
            line-height: 1.6;
        }
        .generate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s;
        }
        .generate-btn:hover {
            transform: translateY(-2px);
        }
        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .status {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 6px;
            text-align: center;
        }
        .success {
            background: #f0fff4;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }
        .error {
            background: #fed7d7;
            color: #742a2a;
            border: 1px solid #feb2b2;
        }
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        .feature {
            padding: 1rem;
            background: #f7fafc;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .feature h3 {
            margin: 0 0 0.5rem 0;
            color: #2d3748;
        }
        .feature p {
            margin: 0;
            color: #4a5568;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìÑ Real-time Order Tracking System</h1>
        <p class="description">
            Generate a comprehensive PDF documentation for the Real-time Order Tracking System. 
            This document includes project overview, architecture, setup instructions, API documentation, 
            and troubleshooting guide.
        </p>

        <div class="features">
            <div class="feature">
                <h3>üèóÔ∏è System Architecture</h3>
                <p>Complete technical overview of the full-stack application structure</p>
            </div>
            <div class="feature">
                <h3>üöÄ Setup Guide</h3>
                <p>Step-by-step instructions for deployment and configuration</p>
            </div>
            <div class="feature">
                <h3>üìä Database Schema</h3>
                <p>Detailed database design and relationships documentation</p>
            </div>
            <div class="feature">
                <h3>üîß API Reference</h3>
                <p>Complete API endpoints and usage examples</p>
            </div>
        </div>

        <button class="generate-btn" onclick="generatePDF()" id="generateBtn">
            üìÑ Generate PDF Documentation
        </button>
        
        <div id="status"></div>
    </div>

    <script>
        function generatePDF() {
            const btn = document.getElementById('generateBtn');
            const status = document.getElementById('status');
            
            btn.disabled = true;
            btn.textContent = '‚è≥ Generating PDF...';
            
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                let yPosition = 20;

                // Helper function to add text with automatic page breaks
                const addText = (text, fontSize = 12, isBold = false) => {
                    if (yPosition > 270) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    doc.setFontSize(fontSize);
                    if (isBold) {
                        doc.setFont(undefined, 'bold');
                    } else {
                        doc.setFont(undefined, 'normal');
                    }
                    
                    const lines = doc.splitTextToSize(text, 170);
                    doc.text(lines, 20, yPosition);
                    yPosition += lines.length * (fontSize * 0.4) + 5;
                };

                const addSection = (title, content) => {
                    addText(title, 16, true);
                    yPosition += 5;
                    addText(content, 12, false);
                    yPosition += 10;
                };

                // Title Page
                doc.setFontSize(24);
                doc.setFont(undefined, 'bold');
                doc.text('Real-time Order Tracking System', 20, 30);
                
                doc.setFontSize(16);
                doc.setFont(undefined, 'normal');
                doc.text('Complete Order Fulfillment & Inventory Management Platform', 20, 50);
                
                doc.setFontSize(12);
                doc.text('Built with Next.js, Supabase, Redis, and TypeScript', 20, 70);
                doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 20, 90);

                // Add new page for content
                doc.addPage();
                yPosition = 20;

                // Table of Contents
                addText('Table of Contents', 18, true);
                addText(`
1. Project Overview
2. System Architecture  
3. Key Features
4. Technology Stack
5. Database Schema
6. API Endpoints
7. Component Structure
8. Setup Instructions
9. Environment Variables
10. Deployment Guide
11. Usage Examples
12. Troubleshooting
`, 12, false);

                doc.addPage();
                yPosition = 20;

                // Project Overview
                addSection('1. Project Overview', `
The Real-time Order Tracking System is a comprehensive e-commerce fulfillment platform designed for grocery and retail businesses. It provides end-to-end order management from customer placement to delivery tracking.

Key Objectives:
‚Ä¢ Streamline order processing and fulfillment workflows
‚Ä¢ Provide real-time inventory management
‚Ä¢ Enable customer order tracking
‚Ä¢ Support multi-user admin dashboard
‚Ä¢ Maintain data consistency with Redis caching
‚Ä¢ Scale with PostgreSQL database backend

Target Users:
‚Ä¢ E-commerce businesses
‚Ä¢ Grocery stores and supermarkets
‚Ä¢ Warehouse managers
‚Ä¢ Customer service teams
‚Ä¢ End customers tracking orders
`);

                // System Architecture
                addSection('2. System Architecture', `
The system follows a modern full-stack architecture:

Frontend Layer:
‚Ä¢ Next.js 15 with App Router
‚Ä¢ React Server Components
‚Ä¢ TypeScript for type safety
‚Ä¢ Tailwind CSS for styling
‚Ä¢ shadcn/ui component library

Backend Layer:
‚Ä¢ Next.js API routes
‚Ä¢ Server Actions for mutations
‚Ä¢ Supabase PostgreSQL database
‚Ä¢ Redis for caching and sessions

Real-time Features:
‚Ä¢ Supabase real-time subscriptions
‚Ä¢ Redis pub/sub for notifications
‚Ä¢ WebSocket connections for live updates

Data Flow:
1. Customer places order through UI
2. Order stored in PostgreSQL via Supabase
3. Inventory updated automatically
4. Redis cache invalidated and refreshed
5. Real-time notifications sent
6. Admin dashboard updates instantly
`);

                // Key Features
                addSection('3. Key Features', `
Order Management:
‚Ä¢ Create, update, and track orders
‚Ä¢ Multi-status workflow (pending ‚Üí confirmed ‚Üí processing ‚Üí shipped ‚Üí delivered)
‚Ä¢ Automatic inventory deduction
‚Ä¢ Customer notifications
‚Ä¢ Bulk order operations

Inventory Management:
‚Ä¢ Real-time stock tracking
‚Ä¢ Low stock alerts
‚Ä¢ Bulk stock updates
‚Ä¢ Product catalog management
‚Ä¢ Category-based organization

Customer Features:
‚Ä¢ Order placement interface
‚Ä¢ Real-time order tracking
‚Ä¢ Delivery status updates
‚Ä¢ Order history
‚Ä¢ Customer information management

Admin Dashboard:
‚Ä¢ Comprehensive order overview
‚Ä¢ Fulfillment queue management
‚Ä¢ Inventory monitoring
‚Ä¢ Analytics and reporting
‚Ä¢ User management

Technical Features:
‚Ä¢ Redis caching for performance
‚Ä¢ Database connection pooling
‚Ä¢ Error handling and recovery
‚Ä¢ Responsive design
‚Ä¢ SEO optimization
`);

                // Technology Stack
                addSection('4. Technology Stack', `
Frontend Technologies:
‚Ä¢ Next.js 15 - React framework with App Router
‚Ä¢ React 18 - UI library with Server Components
‚Ä¢ TypeScript - Type-safe JavaScript
‚Ä¢ Tailwind CSS - Utility-first CSS framework
‚Ä¢ shadcn/ui - Modern component library
‚Ä¢ Lucide React - Icon library

Backend Technologies:
‚Ä¢ Next.js API Routes - Serverless functions
‚Ä¢ Supabase - PostgreSQL database and auth
‚Ä¢ Redis (Upstash) - Caching and sessions
‚Ä¢ Server Actions - Form handling

Development Tools:
‚Ä¢ ESLint - Code linting
‚Ä¢ Prettier - Code formatting
‚Ä¢ Git - Version control
‚Ä¢ Vercel - Deployment platform

Database:
‚Ä¢ PostgreSQL - Primary database
‚Ä¢ Redis - Cache and session store
‚Ä¢ Supabase - Database hosting and management
`);

                // Database Schema
                addSection('5. Database Schema', `
Core Tables:

products:
‚Ä¢ id (UUID, Primary Key)
‚Ä¢ name, sku, description
‚Ä¢ price, cost, stock
‚Ä¢ low_stock_threshold
‚Ä¢ category, status
‚Ä¢ images, weight, dimensions
‚Ä¢ created_at, updated_at

orders:
‚Ä¢ id (UUID, Primary Key)
‚Ä¢ order_number (Unique)
‚Ä¢ customer information
‚Ä¢ shipping_address (JSONB)
‚Ä¢ subtotal, tax, shipping, total
‚Ä¢ status, payment_status, fulfillment_status
‚Ä¢ tracking_number, notes
‚Ä¢ timestamps and assignments

order_items:
‚Ä¢ id (UUID, Primary Key)
‚Ä¢ order_id (Foreign Key)
‚Ä¢ product_id (Foreign Key)
‚Ä¢ product_name, product_sku
‚Ä¢ quantity, unit_price, total_price

customers:
‚Ä¢ id (UUID, Primary Key)
‚Ä¢ name, email, phone
‚Ä¢ address, city, state, zip_code
‚Ä¢ created_at, updated_at

inventory_movements:
‚Ä¢ id (UUID, Primary Key)
‚Ä¢ product_id (Foreign Key)
‚Ä¢ movement_type (in/out/adjustment)
‚Ä¢ quantity, reference_type, reference_id
‚Ä¢ notes, created_at, created_by

Indexes:
‚Ä¢ products: sku, category, status
‚Ä¢ orders: status, customer_email, created_at
‚Ä¢ order_items: order_id
‚Ä¢ inventory_movements: product_id
`);

                // Setup Instructions
                addSection('8. Setup Instructions', `
Prerequisites:
‚Ä¢ Node.js 18+ installed
‚Ä¢ Git for version control
‚Ä¢ Supabase account
‚Ä¢ Upstash Redis account (optional)

Step 1: Clone and Install
1. Clone the repository
2. Run 'npm install' to install dependencies
3. Copy environment variables template

Step 2: Database Setup
1. Create Supabase project at supabase.com
2. Add Supabase integration in v0
3. Run SQL scripts in Supabase SQL Editor:
   - 01-create-supabase-schema.sql
   - 02-create-supabase-functions.sql
   - 03-insert-grocery-products.sql
   - 04-insert-sample-customers.sql
   - 05-insert-sample-orders.sql

Step 3: Redis Setup (Optional)
1. Create Upstash Redis database
2. Add Upstash integration in v0
3. Configure Redis connection

Step 4: Environment Configuration
1. Set up environment variables
2. Configure database connections
3. Test connections

Step 5: Development
1. Run 'npm run dev' for development
2. Visit http://localhost:3000
3. Check connection status
4. Seed sample data if needed

Step 6: Production Deployment
1. Deploy to Vercel
2. Configure production environment variables
3. Run database migrations
4. Test production deployment
`);

                // Environment Variables
                addSection('9. Environment Variables', `
Required Variables:

Database (Supabase):
‚Ä¢ NEXT_PUBLIC_SUPABASE_URL - Your Supabase project URL
‚Ä¢ NEXT_PUBLIC_SUPABASE_ANON_KEY - Public API key
‚Ä¢ SUPABASE_SERVICE_ROLE_KEY - Service role key (server-side only)

Cache (Upstash Redis) - Optional:
‚Ä¢ KV_REST_API_URL - Redis REST API URL
‚Ä¢ KV_REST_API_TOKEN - Redis authentication token
‚Ä¢ REDIS_URL - Redis connection string

Development Variables:
‚Ä¢ NODE_ENV - Environment (development/production)
‚Ä¢ NEXT_PUBLIC_APP_URL - Application base URL

Example .env.local:
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_ROLE_KEY=eyJ...
KV_REST_API_URL=https://your-redis.upstash.io
KV_REST_API_TOKEN=your-token
`);

                // Save the PDF
                doc.save('Real-time-Order-Tracking-System-Documentation.pdf');
                
                status.innerHTML = '<div class="status success">‚úÖ PDF generated successfully! Check your downloads folder.</div>';
                
            } catch (error) {
                console.error('Error generating PDF:', error);
                status.innerHTML = '<div class="status error">‚ùå Error generating PDF. Please try again.</div>';
            } finally {
                btn.disabled = false;
                btn.textContent = 'üìÑ Generate PDF Documentation';
            }
        }
    </script>
</body>
</html>
